# Initialize
set -l node_modules_path (dirname (status -f))

if not contains $node_modules_path/functions $fish_function_path
  set fish_function_path $node_modules_path/functions $fish_function_path
end

# Toggle binstub path
function __node_modules_set_bin_path --on-event fish_prompt
  set -l node_mod_path (directory_in_path node_modules)

  if test -z $node_mod_path
    __node_modules_reset_bin_path
  else
    __node_mod_set_bin_path $node_mod_path
  end
end
